
import React, { useState } from 'react';
import { FormInput } from '../ui/FormInput';
import { ActionButton } from '../ui/ActionButton';
import { LinkText } from '../ui/LinkText';
import { AppLogo } from '../ui/AppLogo';
import { useUser } from '../../contexts/UserContext';

interface LoginFormProps {
  onRegister: () => void;
}

export const LoginForm: React.FC<LoginFormProps> = ({ onRegister }) => {
  const { userEmail, userPassword, setUserEmail, setUserPassword } = useUser();
  const [localEmail, setLocalEmail] = useState(userEmail);
  const [localPassword, setLocalPassword] = useState(userPassword);

  const handleRegisterClick = () => {
    setUserEmail(localEmail);
    setUserPassword(localPassword);
    console.log('Login data saved:', { email: localEmail, password: localPassword });
    onRegister();
  };

  return (
    <div className="w-full max-w-[412px] mx-auto flex flex-col items-center relative">
      {/* Ícone de linguagem no canto superior direito */}
      <div className="absolute top-0 right-0">
        <svg 
          width="38" 
          height="38" 
          viewBox="0 0 38 38" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg" 
          className="globe-icon"
        >
          <path d="M19 34.8333C16.8361 34.8333 14.791 34.4177 12.8646 33.5865C10.9382 32.7552 9.25592 31.6205 7.81773 30.1823C6.37953 28.7441 5.24481 27.0618 4.41356 25.1354C3.58231 23.209 3.16669 21.1639 3.16669 19C3.16669 16.8097 3.58231 14.758 4.41356 12.8448C5.24481 10.9316 6.37953 9.2559 7.81773 7.81771C9.25592 6.37951 10.9382 5.24479 12.8646 4.41354C14.791 3.58229 16.8361 3.16666 19 3.16666C21.1903 3.16666 23.242 3.58229 25.1552 4.41354C27.0684 5.24479 28.7441 6.37951 30.1823 7.81771C31.6205 9.2559 32.7552 10.9316 33.5865 12.8448C34.4177 14.758 34.8334 16.8097 34.8334 19C34.8334 21.1639 34.4177 23.209 33.5865 25.1354C32.7552 27.0618 31.6205 28.7441 30.1823 30.1823C28.7441 31.6205 27.0684 32.7552 25.1552 33.5865C23.242 34.4177 21.1903 34.8333 19 34.8333ZM19 31.5875C19.6861 30.6375 20.2799 29.6479 20.7813 28.6187C21.2827 27.5896 21.6917 26.4944 22.0084 25.3333H15.9917C16.3084 26.4944 16.7174 27.5896 17.2188 28.6187C17.7202 29.6479 18.3139 30.6375 19 31.5875ZM14.8834 30.9542C14.4084 30.0833 13.9927 29.1795 13.6365 28.2427C13.2802 27.3059 12.9834 26.3361 12.7459 25.3333H8.07502C8.8403 26.6528 9.7969 27.8007 10.9448 28.7771C12.0927 29.7535 13.4056 30.4792 14.8834 30.9542ZM23.1167 30.9542C24.5945 30.4792 25.9073 29.7535 27.0552 28.7771C28.2031 27.8007 29.1597 26.6528 29.925 25.3333H25.2542C25.0167 26.3361 24.7198 27.3059 24.3636 28.2427C24.0073 29.1795 23.5917 30.0833 23.1167 30.9542ZM6.72919 22.1667H12.1125C12.0334 21.6389 11.974 21.1177 11.9344 20.6031C11.8948 20.0885 11.875 19.5542 11.875 19C11.875 18.4458 11.8948 17.9115 11.9344 17.3969C11.974 16.8823 12.0334 16.3611 12.1125 15.8333H6.72919C6.59724 16.3611 6.49828 16.8823 6.43231 17.3969C6.36634 17.9115 6.33335 18.4458 6.33335 19C6.33335 19.5542 6.36634 20.0885 6.43231 20.6031C6.49828 21.1177 6.59724 21.6389 6.72919 22.1667ZM15.2792 22.1667H22.7209C22.8 21.6389 22.8594 21.1177 22.899 20.6031C22.9386 20.0885 22.9584 19.5542 22.9584 19C22.9584 18.4458 22.9386 17.9115 22.899 17.3969C22.8594 16.8823 22.8 16.3611 22.7209 15.8333H15.2792C15.2 16.3611 15.1406 16.8823 15.1011 17.3969C15.0615 17.9115 15.0417 18.4458 15.0417 19C15.0417 19.5542 15.0615 20.0885 15.1011 20.6031C15.1406 21.1177 15.2 21.6389 15.2792 22.1667ZM25.8875 22.1667H31.2709C31.4028 21.6389 31.5018 21.1177 31.5677 20.6031C31.6337 20.0885 31.6667 19.5542 31.6667 19C31.6667 18.4458 31.6337 17.9115 31.5677 17.3969C31.5018 16.8823 31.4028 16.3611 31.2709 15.8333H25.8875C25.9667 16.3611 26.0261 16.8823 26.0656 17.3969C26.1052 17.9115 26.125 18.4458 26.125 19C26.125 19.5542 26.1052 20.0885 26.0656 20.6031C26.0261 21.1177 25.9667 21.6389 25.8875 22.1667ZM25.2542 12.6667H29.925C29.1597 11.3472 28.2031 10.1993 27.0552 9.22291C25.9073 8.24653 24.5945 7.52083 23.1167 7.04583C23.5917 7.91666 24.0073 8.82048 24.3636 9.75729C24.7198 10.6941 25.0167 11.6639 25.2542 12.6667ZM15.9917 12.6667H22.0084C21.6917 11.5056 21.2827 10.4104 20.7813 9.38125C20.2799 8.35208 19.6861 7.3625 19 6.4125C18.3139 7.3625 17.7202 8.35208 17.2188 9.38125C16.7174 10.4104 16.3084 11.5056 15.9917 12.6667ZM8.07502 12.6667H12.7459C12.9834 11.6639 13.2802 10.6941 13.6365 9.75729C13.9927 8.82048 14.4084 7.91666 14.8834 7.04583C13.4056 7.52083 12.0927 8.24653 10.9448 9.22291C9.7969 10.1993 8.8403 11.3472 8.07502 12.6667Z" 
          fill="#E3E3E3"
          />
        </svg>
      </div>
      
      <div className="w-full flex flex-col items-center mt-12">
        <AppLogo className="mx-0 my-10" />
        
        <form className="w-full flex flex-col items-center">
          <FormInput 
            type="email" 
            placeholder="Endereço de e-mail" 
            value={localEmail}
            onChange={(e) => setLocalEmail(e.target.value)}
          />
          <FormInput 
            type="password" 
            placeholder="Senha" 
            value={localPassword}
            onChange={(e) => setLocalPassword(e.target.value)}
          />
        </form>
        
        <div className="flex flex-col items-center mx-0 my-5">
          <LinkText href="#">Esqueceu a senha?</LinkText>
          <LinkText href="#">Termos de serviço</LinkText>
        </div>
        
        <ActionButton onClick={handleRegisterClick}>
          CADASTRAR
        </ActionButton>
      </div>
    </div>
  );
};
